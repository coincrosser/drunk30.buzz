(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[978],{1727:function(e,t,r){Promise.resolve().then(r.bind(r,3406))},2660:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6858:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},2934:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},1723:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},3113:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},1817:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3276:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},6744:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},9376:function(e,t,r){"use strict";var s=r(5475);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},3406:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return T}});var s=r(7437),n=r(2265),a=r(9376),i=r(9205);let o=(0,i.Z)("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]);var c=r(3113);let d=(0,i.Z)("FileAudio",[["path",{d:"M17.5 22h.5a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"rslqgf"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 19a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 1 1-4 0v-1a2 2 0 1 1 4 0",key:"9f7x3i"}]]),l=(0,i.Z)("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);var u=r(3276),h=r(1723),f=r(1817),m=r(2934);let p=(0,i.Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var x=r(6744),y=r(2660),N=r(6858),g=r(2381),j=r(9820),b=r(3448),v=r(3340);let E={TRANSCODE:{label:"Transcode Video",icon:o},GENERATE_THUMBNAIL:{label:"Generate Thumbnail",icon:c.Z},EXTRACT_AUDIO:{label:"Extract Audio",icon:d},GENERATE_SHORTS:{label:"Generate Shorts",icon:l},PUBLISH_YOUTUBE:{label:"Publish to YouTube",icon:u.Z}};function T(){let e=(0,a.useParams)(),t=(0,a.useRouter)(),{toast:r}=(0,v.pm)(),[i,T]=(0,n.useState)(null),[S,k]=(0,n.useState)(!0),[w,A]=(0,n.useState)(null),[R,Z]=(0,n.useState)(!1),I=(0,n.useCallback)(async()=>{try{let t=await fetch("/api/episodes/".concat(e.id,"?include=recordings,assets,jobs"));if(!t.ok)throw Error("Episode not found");let r=await t.json();return T(r.episode),r.episode}catch(e){return A(e instanceof Error?e.message:"Failed to load episode"),null}finally{k(!1)}},[e.id]);(0,n.useEffect)(()=>{e.id&&I()},[e.id,I]),(0,n.useEffect)(()=>{if(i&&i.jobs.some(e=>"RUNNING"===e.status||"PENDING"===e.status)&&!R){Z(!0);let e=setInterval(async()=>{let t=await I();t&&!t.jobs.some(e=>"RUNNING"===e.status||"PENDING"===e.status)&&(Z(!1),clearInterval(e))},3e3);return()=>clearInterval(e)}},[i,R,I]);let O=async e=>{if(i)try{let t=await fetch("/api/jobs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({episodeId:i.id,type:e})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to start job")}r({title:"Job Started",description:"".concat(E[e].label," has been queued.")}),I()}catch(e){r({title:"Error",description:e instanceof Error?e.message:"Failed to start job",variant:"destructive"})}},C=async e=>{try{if(!(await fetch("/api/jobs/".concat(e,"/retry"),{method:"POST"})).ok)throw Error("Failed to retry job");r({title:"Job Retried",description:"The job has been queued again."}),I()}catch(e){r({title:"Error",description:"Failed to retry job",variant:"destructive"})}},D=e=>null==i?void 0:i.jobs.find(t=>t.type===e),M=(e,t)=>{let{label:r,icon:n}=E[t];if(!e)return(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 bg-muted rounded-lg",children:(0,s.jsx)(n,{className:"h-5 w-5 text-muted-foreground"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:r}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Not started"})]})]}),(0,s.jsxs)(g.z,{size:"sm",onClick:()=>O(t),children:[(0,s.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),"Start"]})]});let a={PENDING:(0,s.jsx)(h.Z,{className:"h-5 w-5 text-muted-foreground"}),RUNNING:(0,s.jsx)(f.Z,{className:"h-5 w-5 text-blue-500 animate-spin"}),COMPLETED:(0,s.jsx)(m.Z,{className:"h-5 w-5 text-green-500"}),FAILED:(0,s.jsx)(p,{className:"h-5 w-5 text-destructive"})};return(0,s.jsxs)("div",{className:(0,b.cn)("flex items-center justify-between p-4 border rounded-lg","RUNNING"===e.status&&"border-blue-500/50 bg-blue-500/5","COMPLETED"===e.status&&"border-green-500/50 bg-green-500/5","FAILED"===e.status&&"border-destructive/50 bg-destructive/5"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 bg-muted rounded-lg",children:(0,s.jsx)(n,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:r}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["PENDING"===e.status&&"Queued...","RUNNING"===e.status&&"Processing".concat(e.progress?" (".concat(e.progress,"%)"):"..."),"COMPLETED"===e.status&&"Completed","FAILED"===e.status&&(e.error||"Failed")]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[a[e.status],"FAILED"===e.status&&(0,s.jsxs)(g.z,{size:"sm",variant:"outline",onClick:()=>C(e.id),children:[(0,s.jsx)(x.Z,{className:"mr-2 h-4 w-4"}),"Retry"]})]})]})};if(S)return(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,s.jsx)(f.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})});if(w||!i)return(0,s.jsxs)("div",{className:"container max-w-2xl py-12 text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Episode Not Found"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-6",children:w||"Could not load episode"}),(0,s.jsxs)(g.z,{onClick:()=>t.push("/studio"),children:[(0,s.jsx)(y.Z,{className:"mr-2 h-4 w-4"}),"Back to Studio"]})]});let _=i.recordings.length>0,P=i.recordings[0];return(0,s.jsxs)("div",{className:"container max-w-4xl py-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(g.z,{variant:"ghost",onClick:()=>t.push("/studio"),children:[(0,s.jsx)(y.Z,{className:"mr-2 h-4 w-4"}),"Back"]}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Episode ",i.episodeNumber,": ",i.title]})]}),_?(0,s.jsx)(j.Zb,{children:(0,s.jsxs)(j.Ol,{children:[(0,s.jsx)(j.ll,{children:"Raw Recording"}),(0,s.jsxs)(j.SZ,{children:["Recorded ",(0,b.p6)(P.createdAt)," • Duration:"," ",(0,b.LU)(P.duration)]})]})}):(0,s.jsxs)(j.Zb,{children:[(0,s.jsxs)(j.Ol,{children:[(0,s.jsx)(j.ll,{children:"No Recording Yet"}),(0,s.jsx)(j.SZ,{children:"Record your episode first before processing."})]}),(0,s.jsx)(j.aY,{children:(0,s.jsx)(g.z,{onClick:()=>t.push("/studio/record/".concat(i.id)),children:"Go to Recording"})})]}),_&&(0,s.jsxs)(j.Zb,{children:[(0,s.jsxs)(j.Ol,{children:[(0,s.jsx)(j.ll,{children:"Processing Jobs"}),(0,s.jsx)(j.SZ,{children:"Process your recording to prepare it for publishing."})]}),(0,s.jsxs)(j.aY,{className:"space-y-4",children:[M(D("TRANSCODE"),"TRANSCODE"),M(D("EXTRACT_AUDIO"),"EXTRACT_AUDIO"),M(D("GENERATE_THUMBNAIL"),"GENERATE_THUMBNAIL"),M(D("GENERATE_SHORTS"),"GENERATE_SHORTS")]})]}),i.assets.length>0&&(0,s.jsxs)(j.Zb,{children:[(0,s.jsxs)(j.Ol,{children:[(0,s.jsx)(j.ll,{children:"Generated Assets"}),(0,s.jsx)(j.SZ,{children:"Files created from processing your recording."})]}),(0,s.jsx)(j.aY,{children:(0,s.jsx)("div",{className:"space-y-2",children:i.assets.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:["PROCESSED_VIDEO"===e.type&&(0,s.jsx)(o,{className:"h-5 w-5"}),"AUDIO"===e.type&&(0,s.jsx)(d,{className:"h-5 w-5"}),"THUMBNAIL"===e.type&&(0,s.jsx)(c.Z,{className:"h-5 w-5"}),"SHORT_CLIP"===e.type&&(0,s.jsx)(l,{className:"h-5 w-5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-sm",children:e.filename}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(e.size/1024/1024).toFixed(2)," MB",e.duration&&" • ".concat((0,b.LU)(e.duration))]})]})]}),e.url&&(0,s.jsx)(g.z,{size:"sm",variant:"outline",asChild:!0,children:(0,s.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:"View"})})]},e.id))})})]}),_&&(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsxs)(g.z,{onClick:()=>t.push("/studio/youtube-pack/".concat(i.id)),children:["Continue to YouTube Pack",(0,s.jsx)(N.Z,{className:"ml-2 h-4 w-4"})]})})]})}},2381:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var s=r(7437),n=r(2265),a=r(7495),i=r(535),o=r(3448);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 touch-manipulation tap-highlight-none",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:d=!1,...l}=e,u=d?a.g7:"button";return(0,s.jsx)(u,{className:(0,o.cn)(c({variant:n,size:i,className:r})),ref:t,...l})});d.displayName="Button"},9820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return i},aY:function(){return l},ll:function(){return c}});var s=r(7437),n=r(2265),a=r(3448);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});i.displayName="Card";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...n})});o.displayName="CardHeader";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});c.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...n})});d.displayName="CardDescription";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...n})});l.displayName="CardContent",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...n})}).displayName="CardFooter"},3340:function(e,t,r){"use strict";r.d(t,{pm:function(){return h}});var s=r(2265);let n=0,a=new Map,i=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],d={toasts:[]};function l(e){d=o(d,e),c.forEach(e=>{e(d)})}function u(e){let{...t}=e,r=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>l({type:"DISMISS_TOAST",toastId:r});return l({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function h(){let[e,t]=s.useState(d);return s.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}},3448:function(e,t,r){"use strict";r.d(t,{LU:function(){return o},cn:function(){return a},p6:function(){return i}});var s=r(1994),n=r(3335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,s.W)(t))}function i(e){return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(new Date(e))}function o(e){let t=Math.floor(e/1e3),r=Math.floor(t/60),s=Math.floor(r/60);return s>0?"".concat(s,":").concat((r%60).toString().padStart(2,"0"),":").concat((t%60).toString().padStart(2,"0")):"".concat(r,":").concat((t%60).toString().padStart(2,"0"))}r(257)}},function(e){e.O(0,[550,971,117,744],function(){return e(e.s=1727)}),_N_E=e.O()}]);