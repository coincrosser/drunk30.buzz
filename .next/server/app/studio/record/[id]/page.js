(()=>{var e={};e.id=691,e.ids=[691],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5753:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>o,routeModule:()=>x,tree:()=>n}),t(7731),t(6788),t(996);var r=t(170),a=t(5002),i=t(3876),l=t.n(i),c=t(6299),d={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>c[e]);t.d(s,d);let n=["",{children:["studio",{children:["record",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7731)),"C:\\Users\\echob\\OneDrive\\Desktop\\podcast\\drunk30.buzz\\src\\app\\studio\\record\\[id]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,6788)),"C:\\Users\\echob\\OneDrive\\Desktop\\podcast\\drunk30.buzz\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,996,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\echob\\OneDrive\\Desktop\\podcast\\drunk30.buzz\\src\\app\\studio\\record\\[id]\\page.tsx"],u="/studio/record/[id]/page",p={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/studio/record/[id]/page",pathname:"/studio/record/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},8130:(e,s,t)=>{Promise.resolve().then(t.bind(t,6995))},7940:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6323).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},4747:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6323).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},8749:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6323).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6173:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6323).Z)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]])},721:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6323).Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},302:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6323).Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},6995:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>z});var r=t(7247),a=t(8964),i=t(4178),l=t(8749),c=t(7940),d=t(6323);let n=(0,d.Z)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);var o=t(6173);let u=(0,d.Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),p=(0,d.Z)("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),x=(0,d.Z)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),h=(0,d.Z)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),m=(0,d.Z)("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),y=(0,d.Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),f=(0,d.Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);var g=t(721),v=t(302);let j=(0,d.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var w=t(4747),k=t(8852),b=t(5757),N=t(677),C=t(9835);function z(){(0,i.useParams)();let e=(0,i.useRouter)(),{toast:s}=(0,C.pm)(),[t,d]=(0,a.useState)(null),[z,Z]=(0,a.useState)(!0),[P,R]=(0,a.useState)(null),[S,M]=(0,a.useState)("idle"),[U,O]=(0,a.useState)(!1),[T,_]=(0,a.useState)(!1),[q,A]=(0,a.useState)(!0),[E,D]=(0,a.useState)(!0),[F,L]=(0,a.useState)(0),[V,I]=(0,a.useState)(null),[H,G]=(0,a.useState)(0),[B,Y]=(0,a.useState)("user"),$=(0,a.useRef)(null),J=(0,a.useRef)(null),K=(0,a.useRef)(null),X=(0,a.useRef)(null),Q=(0,a.useRef)([]),W=(0,a.useRef)(null),ee=(0,a.useCallback)(async()=>{try{X.current&&X.current.getTracks().forEach(e=>e.stop());let e=await navigator.mediaDevices.getUserMedia({video:!!q&&{facingMode:B,width:{ideal:1920},height:{ideal:1080}},audio:!!E&&{echoCancellation:!0,noiseSuppression:!0}});X.current=e,$.current&&($.current.srcObject=e),O(e.getVideoTracks().length>0),_(e.getAudioTracks().length>0)}catch(e){console.error("Failed to access camera:",e),s({title:"Camera Access Denied",description:"Please allow camera and microphone access to record.",variant:"destructive"})}},[q,E,B,s]),es=()=>{K.current&&"inactive"!==K.current.state&&(K.current.stop(),M("stopped"),W.current&&clearInterval(W.current))},et=async()=>{if(V&&t){M("uploading"),G(0);try{let e=await fetch("/api/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({episodeId:t.id,filename:`episode-${t.episodeNumber}-raw.webm`,contentType:"video/webm",size:V.size})});if(!e.ok)throw Error("Failed to get upload URL");let{uploadUrl:r,assetId:a}=await e.json();if(!(await fetch(r,{method:"PUT",headers:{"Content-Type":"video/webm"},body:V})).ok)throw Error("Upload failed");await fetch(`/api/upload/${a}/confirm`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({duration:F})}),M("uploaded"),G(100),s({title:"Upload Complete",description:"Your recording has been saved successfully."})}catch(e){console.error("Upload failed:",e),M("stopped"),s({title:"Upload Failed",description:e instanceof Error?e.message:"Could not upload recording.",variant:"destructive"})}}};return z?r.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:r.jsx(l.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):P||!t?(0,r.jsxs)("div",{className:"container max-w-2xl py-12 text-center",children:[r.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Episode Not Found"}),r.jsx("p",{className:"text-muted-foreground mb-6",children:P||"Could not load episode"}),(0,r.jsxs)(k.z,{onClick:()=>e.push("/studio"),children:[r.jsx(c.Z,{className:"mr-2 h-4 w-4"}),"Back to Studio"]})]}):(0,r.jsxs)("div",{className:"container max-w-4xl py-6 space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(k.z,{variant:"ghost",onClick:()=>e.push("/studio"),children:[r.jsx(c.Z,{className:"mr-2 h-4 w-4"}),"Back"]}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Episode ",t.episodeNumber,": ",t.title]})]}),(0,r.jsxs)(b.Zb,{children:[(0,r.jsxs)(b.Ol,{children:[(0,r.jsxs)(b.ll,{className:"flex items-center gap-2",children:[r.jsx(n,{className:"h-5 w-5"}),"Record Episode"]}),r.jsx(b.SZ,{children:"Record your video directly from your browser. Use front camera for selfie-style recording."})]}),(0,r.jsxs)(b.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"relative aspect-video bg-black rounded-lg overflow-hidden",children:["stopped"===S||"uploaded"===S?r.jsx("video",{ref:J,className:"w-full h-full object-cover",controls:!0,playsInline:!0}):r.jsx("video",{ref:$,className:(0,N.cn)("w-full h-full object-cover","user"===B&&"scale-x-[-1]"),autoPlay:!0,muted:!0,playsInline:!0}),"recording"===S&&(0,r.jsxs)("div",{className:"absolute top-4 left-4 flex items-center gap-2 bg-red-600 text-white px-3 py-1 rounded-full text-sm",children:[r.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"REC"]}),"paused"===S&&(0,r.jsxs)("div",{className:"absolute top-4 left-4 flex items-center gap-2 bg-yellow-600 text-white px-3 py-1 rounded-full text-sm",children:[r.jsx(o.Z,{className:"h-3 w-3"}),"PAUSED"]}),("recording"===S||"paused"===S||"stopped"===S)&&r.jsx("div",{className:"absolute top-4 right-4 bg-black/70 text-white px-3 py-1 rounded-full text-sm font-mono",children:(0,N.LU)(F)}),(!U||!T)&&"idle"===S&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/80",children:(0,r.jsxs)("div",{className:"text-center text-white p-6",children:[r.jsx(u,{className:"h-12 w-12 mx-auto mb-4 text-yellow-500"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"Camera Access Required"}),r.jsx("p",{className:"text-sm text-white/70 mb-4",children:"Please allow camera and microphone access to record."}),r.jsx(k.z,{onClick:ee,children:"Grant Access"})]})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-4",children:["idle"===S&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(k.z,{variant:"outline",size:"icon",onClick:()=>A(!q),className:(0,N.cn)(!q&&"text-destructive"),children:q?r.jsx(n,{className:"h-5 w-5"}):r.jsx(p,{className:"h-5 w-5"})}),r.jsx(k.z,{size:"lg",className:"bg-red-600 hover:bg-red-700 text-white rounded-full h-16 w-16",onClick:()=>{if(X.current){Q.current=[];try{let e=new MediaRecorder(X.current,{mimeType:"video/webm;codecs=vp9,opus"});K.current=e,e.ondataavailable=e=>{e.data.size>0&&Q.current.push(e.data)},e.onstop=()=>{let e=new Blob(Q.current,{type:"video/webm"});I(e),J.current&&(J.current.src=URL.createObjectURL(e))},e.start(1e3),M("recording"),L(0),W.current=setInterval(()=>{L(e=>e+1)},1e3)}catch(e){console.error("Failed to start recording:",e),s({title:"Recording Failed",description:"Could not start recording. Please try again.",variant:"destructive"})}}},disabled:!U&&!T,children:r.jsx(x,{className:"h-6 w-6 fill-current"})}),r.jsx(k.z,{variant:"outline",size:"icon",onClick:()=>D(!E),className:(0,N.cn)(!E&&"text-destructive"),children:E?r.jsx(h,{className:"h-5 w-5"}):r.jsx(m,{className:"h-5 w-5"})}),r.jsx(k.z,{variant:"outline",size:"icon",onClick:()=>{Y(e=>"user"===e?"environment":"user")},children:r.jsx(y,{className:"h-5 w-5"})})]}),"recording"===S&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(k.z,{variant:"outline",size:"icon",onClick:()=>{K.current?.state==="recording"&&(K.current.pause(),M("paused"),W.current&&clearInterval(W.current))},children:r.jsx(o.Z,{className:"h-5 w-5"})}),r.jsx(k.z,{size:"lg",variant:"destructive",className:"rounded-full h-16 w-16",onClick:es,children:r.jsx(f,{className:"h-6 w-6 fill-current"})})]}),"paused"===S&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(k.z,{variant:"outline",size:"icon",onClick:()=>{K.current?.state==="paused"&&(K.current.resume(),M("recording"),W.current=setInterval(()=>{L(e=>e+1)},1e3))},children:r.jsx(g.Z,{className:"h-5 w-5"})}),r.jsx(k.z,{size:"lg",variant:"destructive",className:"rounded-full h-16 w-16",onClick:es,children:r.jsx(f,{className:"h-6 w-6 fill-current"})})]}),"stopped"===S&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(k.z,{variant:"outline",onClick:()=>{I(null),L(0),M("idle"),J.current&&(J.current.src="")},children:[r.jsx(v.Z,{className:"mr-2 h-4 w-4"}),"Re-record"]}),(0,r.jsxs)(k.z,{onClick:et,children:[r.jsx(j,{className:"mr-2 h-4 w-4"}),"Upload Recording"]})]}),"uploading"===S&&(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx(l.Z,{className:"h-6 w-6 animate-spin"}),(0,r.jsxs)("span",{children:["Uploading... ",H,"%"]})]}),"uploaded"===S&&(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[r.jsx(w.Z,{className:"h-5 w-5"}),"Uploaded successfully"]}),r.jsx(k.z,{onClick:()=>e.push(`/studio/process/${t.id}`),children:"Continue to Processing"})]})]}),(0,r.jsxs)("div",{className:"bg-muted/50 rounded-lg p-4 text-sm",children:[r.jsx("p",{className:"font-medium mb-2",children:"Recording Tips:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:[r.jsx("li",{children:"Find good lighting â€” natural light works best"}),r.jsx("li",{children:"Use a quiet environment or speak clearly"}),r.jsx("li",{children:"Keep your phone steady or use a tripod"}),r.jsx("li",{children:"Tap pause if you need a moment"})]})]})]})]})]})}},5757:(e,s,t)=>{"use strict";t.d(s,{Ol:()=>c,SZ:()=>n,Zb:()=>l,aY:()=>o,ll:()=>d});var r=t(7247),a=t(8964),i=t(677);let l=a.forwardRef(({className:e,...s},t)=>r.jsx("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));l.displayName="Card";let c=a.forwardRef(({className:e,...s},t)=>r.jsx("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...s}));c.displayName="CardHeader";let d=a.forwardRef(({className:e,...s},t)=>r.jsx("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));d.displayName="CardTitle";let n=a.forwardRef(({className:e,...s},t)=>r.jsx("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...s}));n.displayName="CardDescription";let o=a.forwardRef(({className:e,...s},t)=>r.jsx("div",{ref:t,className:(0,i.cn)("p-6 pt-0",e),...s}));o.displayName="CardContent",a.forwardRef(({className:e,...s},t)=>r.jsx("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"},7731:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(5347).createProxy)(String.raw`C:\Users\echob\OneDrive\Desktop\podcast\drunk30.buzz\src\app\studio\record\[id]\page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[787,498,788],()=>t(5753));module.exports=r})();